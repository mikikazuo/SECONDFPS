/*
 * get_data.cpp
 *
 *  Created on: 2016/12/02
 *      Author: c501506026
 */

#include "get_data.h"
#include "stdio.h"
#include "net_common.h"
#include "bullet.h"
#include "server_main.h"
#include "map.h"

int get_bulletdata(int id,C_CONTAINER cdata,S_CONTAINER *sdata){


	for(int i=0;i<MAXBULLET;i++){
		if(cdata.my_bullet.bullet_info[i].count>0){
			sdata->bullets[id].bullet_info[i].count=cdata.my_bullet.bullet_info[i].count;
			sdata->bullets[id].bullet_info[i].pos.x=cdata.my_bullet.bullet_info[i].pos.x;
			sdata->bullets[id].bullet_info[i].pos.y=cdata.my_bullet.bullet_info[i].pos.y;
			sdata->bullets[id].bullet_info[i].pos.z=cdata.my_bullet.bullet_info[i].pos.z;
			sdata->bullets[id].bullet_info[i].angles.x=cdata.my_bullet.bullet_info[i].angles.x;
			sdata->bullets[id].bullet_info[i].angles.y=cdata.my_bullet.bullet_info[i].angles.y;
			sdata->bullets[id].bullet_info[i].angles.z=cdata.my_bullet.bullet_info[i].angles.z;
		}else
			sdata->bullets[id].bullet_info[i].count=0;
		//弾の数の表示
		//	printf("bullets number = %d\n",j);
	}

	return 0;
}

int get_playerdata(int id,C_CONTAINER cdata,S_CONTAINER* sdata){

	sdata->players[id] = cdata.my_player;
	return 0;
}

void set_MapData(int id,S_CONTAINER* sdata){

	for(int i=0;i<50;i++){
		if(get_movableno()[i]==-1)
			break;
		sdata->movablemapobj[i].objno=get_movableno()[i];
		sdata->movablemapobj[i].position.x=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().x;
		sdata->movablemapobj[i].position.y=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().y;
		sdata->movablemapobj[i].position.z=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().z;
		sdata->movablemapobj[i].rotation.x=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().x;
		sdata->movablemapobj[i].rotation.y=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().y;
		sdata->movablemapobj[i].rotation.z=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().z;
	}
}

void set_MobData(int id,S_CONTAINER* sdata){

	for(int i=0;i<10;i++){
		sdata->mob[i].position.x=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().x;
		sdata->mob[i].position.y=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().y;
		sdata->mob[i].position.z=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Pos().z;
		sdata->mob[i].angles.x=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().x;
		sdata->mob[i].rotation.y=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().y;
		sdata->mob[i].rotation.z=get_mapobj()->get_obj()[get_movableno()[i]].get_m_Rot().z;
	}

}

